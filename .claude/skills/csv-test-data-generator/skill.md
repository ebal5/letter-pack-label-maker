# CSV Test Data Generator Skill

このSkillは、レターパックラベル用のテストCSVデータを生成します。

## 使用方法

ユーザーが以下のような依頼をした際に、このSkillを起動してください：
- 「テスト用のCSVを生成して」
- 「100件のサンプルデータが欲しい」
- 「エッジケースのCSVを作って」
- 「ストレステスト用のデータを用意して」
- 「テストデータを生成してください」

## データパターン

### 1. 標準パターン（デフォルト）

実際の使用例に近いリアルなデータ：
- 日本の実在する都道府県、市区町村名
- 一般的な日本人の名前
- 正しい郵便番号形式（XXX-XXXX）
- 様々な敬称（様、殿、なし）
- ビジネスライクな建物名を含む

### 2. エッジケースパターン

境界値テスト用：
- **長い住所**：最大文字数ギリギリ（複数行での長い住所）
- **短い住所**：最小限の情報
- **特殊な敬称**：御中、各位などバリエーション
- **長い名前**：会社名、団体名など
- **境界郵便番号**：000-0000、999-9999など
- **空の敬称**：敬称なしの記録

### 3. ストレステストパターン

大量データ生成：
- 指定件数（10、100、1000、10000件など）
- ランダムな組み合わせで多様性を確保
- ページ数の自動計算（4upレイアウト対応）
- メモリ効率を考慮した生成

### 4. 不正データパターン（バリデーションテスト用）

意図的に不正なデータ：
- 郵便番号の形式エラー
- 必須フィールドの欠落
- 不正な文字コード
- 空行、空白のみの行

## CSV形式

生成されるCSVは、`src/letterpack/csv_parser.py`の仕様に完全準拠：

```csv
to_postal,to_address,to_name,to_phone,to_honorific,from_postal,from_address,from_name,from_phone,from_honorific
100-0001,東京都千代田区千代田1-1,,山田太郎,様,150-0001,東京都渋谷区渋谷1-1,,佐藤花子,
```

**カラム説明：**
- `to_postal`: お届け先郵便番号（必須、XXX-XXXX形式）
- `to_address`: お届け先住所（必須）
- `to_name`: お届け先名前（必須）
- `to_phone`: お届け先電話番号（任意）
- `to_honorific`: お届け先敬称（任意、デフォルト: 様）
- `from_postal`: ご依頼主郵便番号（必須）
- `from_address`: ご依頼主住所（必須）
- `from_name`: ご依頼主名前（必須）
- `from_phone`: ご依頼主電話番号（任意）
- `from_honorific`: ご依頼主敬称（任意、デフォルト: 空）

## 実装の詳細

### 使用ツール
- **Bash**: Pythonスクリプトの実行
- **Write**: CSVファイルの出力
- **Read**: サンプルデータの参照

### 生成スクリプト

スクリプトは `tools/generate_test_csv.py` として実装され、以下の機能を提供：

1. **データソース**
   - 日本の都道府県リスト（47都道府県）
   - 主要な市区町村リスト
   - 一般的な日本人の姓名
   - リアルな郵便番号生成

2. **パターン別生成**
   - 標準: `generate_standard_data(count)`
   - エッジケース: `generate_edge_case_data()`
   - ストレステスト: `generate_stress_data(count)`
   - 不正データ: `generate_invalid_data()`

3. **ファイル出力**
   - UTF-8エンコーディング
   - Shift_JIS対応（フォールバック）
   - `examples/`ディレクトリに自動保存

## 使用例

### 基本的な使用例

```
ユーザー: 「100件のテストCSVを生成して」

Skill実行:
1. 標準パターンで100件のデータを生成
2. examples/test_addresses_standard_100.csv に保存
3. サマリーを表示
4. 使用方法を提示
```

### 出力例

```
✅ テストCSVデータを生成しました

【ファイル情報】
- ファイル: examples/test_addresses_standard_100.csv
- 件数: 100件
- パターン: 標準
- 推定ページ数: 25ページ（4upレイアウト）
- 生成時刻: 2024-11-14 12:42:00

【内容サマリー】
- 宛先敬称の分布: 様: 60件、殿: 30件、なし: 10件
- 都道府県種類: 35種類
- 市区町村種類: 45種類
- 建物名を含む: 75件

【次のステップ】
以下のコマンドでラベルを生成できます：
```bash
uv run python -m letterpack.cli --csv examples/test_addresses_standard_100.csv --output output/test_labels.pdf
```
```

## 推奨される使用シナリオ

1. **新機能開発時**
   - 新しいフィールドを追加する時に、多様なテストデータが必要
   - エッジケースパターンで境界値テストを実施

2. **パフォーマンステスト**
   - ストレステストパターンで大量データの処理確認
   - ページ数計算やメモリ使用量の測定

3. **プレゼンテーション・デモ**
   - サンプルデータで実際の出力を確認
   - 標準パターンで現実的なシナリオを提示

4. **バリデーション機能の確認**
   - 不正データパターンでエラーハンドリングを検証
   - 形式エラーの検出が正しく動作するか確認

5. **ドキュメント・README作成**
   - サンプルCSVを複数パターン生成
   - 実際の使用例を示す際に活用

## 出力ファイルの命名規則

生成されたCSVファイルは以下の規則で命名されます：

- 標準パターン: `test_addresses_standard_<件数>.csv`
- エッジケース: `test_addresses_edge_case.csv`
- ストレステスト: `test_addresses_stress_<件数>.csv`
- 不正データ: `test_addresses_invalid.csv`

## 注意事項

- **エンコーディング**: デフォルトはUTF-8です。Shift_JIS対応のアプリケーションの場合は、別途変換が必要です
- **プライバシー**: 生成されるデータは完全にランダムで、実在する個人情報ではありません
- **ファイルサイズ**: 大量データ生成時（10000件以上）はファイルサイズが大きくなります
- **重複排除**: 完全にランダムなため、同じデータが重複する可能性があります

## バージョン情報

- **作成日**: 2024-11-14
- **対応CSV形式バージョン**: 1.0
- **互換性**: `src/letterpack/csv_parser.py` v1.0以上
