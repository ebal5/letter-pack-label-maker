# PDF Validation Skill

このSkillは、生成されたPDFを検証し、品質保証を支援します。

## 使用方法

ユーザーが以下のような指示をした際に、このSkillを起動してください：
- 「PDFを検証して」
- 「生成されたPDFの検証をお願い」
- 「PDFの内容確認」

## 検証項目

このSkillは以下の項目を自動的に検証します：

### 1. ファイルの存在確認
- 指定されたPDFファイルの存在確認
- ファイルの読み取り可能性確認

### 2. PDFの基本情報
- **ページサイズ**: A4（210mm × 297mm）が正しく設定されているか
- **ページ数**: 期待されるページ数と一致しているか
- **PDFバージョン**: 互換性のあるバージョンか

### 3. フォント情報
- **使用フォント名**: 適切な日本語フォントが使用されているか
- **フォント埋め込み状態**: フォントが正しく埋め込まれているか
- **日本語フォントの有無**: 日本語テキスト表示に必要なフォントが含まれているか

### 4. テキスト内容（レターパックラベル）
- **郵便番号**: 形式（XXX-XXXX）で正しく含まれているか
- **住所**: 期待される住所フィールドが存在するか
- **名前**: 受取人名が正しく含まれているか
- **その他フィールド**: 差出人情報などが正しく配置されているか

### 5. レイアウト検証（可能な場合）
- **マージン**: 適切なマージンが確保されているか
- **要素の配置**: テキストや要素が正しい位置にあるか
- **フォントサイズ**: 可読性のある適切なサイズか

## 実装の詳細

### 使用ツール・ライブラリ
- **PyPDF2**: PDF構造の解析、メタデータの抽出
- **pdfplumber**: テキスト内容の抽出、レイアウト情報の取得
- **Read**: PDFファイルの読み取り（バイナリ）
- **Bash**: 検証スクリプトの実行、ライブラリのインストール
- **Grep**: テキスト内容の検索

### 検証フロー
1. PDFファイルのパスを確認（通常は `output/` ディレクトリ内）
2. PyPDF2でPDFメタデータを解析
3. pdfplumberでテキスト内容を抽出
4. 各検証項目をチェック
5. 問題があれば具体的な修正案を提示
6. 検証結果をレポート形式で出力

## 出力例

```
✅ PDF検証結果

【基本情報】
- ファイル: output/test_label.pdf
- ページサイズ: 210mm × 297mm (A4) ✅
- ページ数: 1 ✅
- PDFバージョン: 1.4 ✅

【フォント】
- IPAGothic: 埋め込み済み ✅
- Helvetica: 標準フォント ✅

【テキスト内容】
- 郵便番号: 100-0001 ✅
- 住所: 東京都千代田区千代田1-1 ✅
- 名前: 山田太郎 様 ✅

【警告】
なし

【総合評価】
✅ すべての検証項目をパスしました。
```

## 注意事項

- このSkillは品質保証の補助ツールです。最終的な確認は手動で行うことを推奨します
- 複数ページPDFの場合は、各ページを検証します
- PDF生成エラーがある場合は、エラーメッセージと修正案を提示します
- フォント埋め込み状態は環境によって異なる場合があります
